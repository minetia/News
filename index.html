<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News - Global Insight & Live Feed</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- [News Theme] --- */
        :root {
            --bg-color: #f4f6f8;
            --card-bg: #ffffff;
            --text-main: #1a202c;
            --text-sub: #718096;
            --accent: #c0392b; /* News Red */
            --biz-gradient: linear-gradient(135deg, #c0392b 0%, #8e44ad 100%); /* Red to Purple */
            --story-gradient: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
            --header-offset: 185px;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Outfit', "Noto Sans SC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            padding-bottom: 70px;
            overscroll-behavior-y: none;
        }

        /* --- [Ticker] --- */
        .ticker-wrap {
            position: fixed; top: 0; left: 0; width: 100%; height: 30px;
            background: #1a1a1a; color: #fff; z-index: 2100;
            overflow: hidden; line-height: 30px; font-size: 0.8rem;
            border-bottom: 1px solid #333;
        }
        .ticker { display: inline-block; white-space: nowrap; animation: ticker 40s linear infinite; }
        .ticker-item { display: inline-block; padding: 0 20px; }
        .badge-breaking { background: #e74c3c; color: white; padding: 2px 5px; border-radius: 3px; font-weight: bold; font-size: 0.7rem; margin-right: 5px; }
        .up { color: #f87171; } .down { color: #60a5fa; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* --- [Header] --- */
        header {
            position: fixed; top: 30px; left: 0; width: 100%; z-index: 2000;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid #e2e8f0;
            display: flex; flex-direction: column; align-items: center;
        }
        
        .header-inner { width: 100%; max-width: 1400px; }

        .header-top {
            padding: 10px 15px; display: flex; justify-content: space-between; align-items: center;
        }
        
        .logo-area { display: flex; align-items: center; gap: 6px; cursor: pointer; }
        .logo-icon {
            font-size: 1.4rem; background: var(--biz-gradient);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .logo-text { font-size: 1.5rem; font-weight: 900; letter-spacing: -0.5px; color: #1a202c; }
        .category-badge {
            background: #1a202c; color: #fff; padding: 2px 6px; 
            border-radius: 4px; font-size: 0.65rem; font-weight: bold; text-transform: uppercase;
        }

        .header-actions { display: flex; align-items: center; gap: 10px; }
        .notification-wrap { position: relative; font-size: 20px; color: #374151; cursor: pointer; }
        .notification-wrap.alert { animation: bellShake 0.5s ease-in-out infinite; color: var(--accent); }
        .red-dot {
            position: absolute; top: 0; right: 0; width: 7px; height: 7px;
            background: var(--accent); border-radius: 50%; border: 1px solid #fff; display: none;
        }
        @keyframes bellShake { 0% { transform: rotate(0); } 25% { transform: rotate(15deg); } 50% { transform: rotate(0); } 75% { transform: rotate(-15deg); } 100% { transform: rotate(0); } }

        .lang-selector {
            border: 1px solid #cbd5e0; padding: 4px 8px; border-radius: 6px;
            background: #fff; font-size: 0.75rem; font-weight: 700; color: #374151;
            cursor: pointer; outline: none; transition: 0.2s;
        }
        .lang-selector:hover { border-color: var(--accent); color: var(--accent); }

        /* ìŠ¤í† ë¦¬ (ì¹´í…Œê³ ë¦¬) */
        .stories-container {
            width: 100%; border-bottom: 1px solid #e2e8f0; background: #fff;
            display: flex; justify-content: center;
        }
        .story-scroll-view {
            width: 100%; max-width: 1400px;
            overflow-x: auto; white-space: nowrap; -ms-overflow-style: none; scrollbar-width: none;
            padding: 10px 0;
        }
        .story-scroll-view::-webkit-scrollbar { display: none; }

        .story-wrapper { display: inline-flex; gap: 15px; padding: 0 15px; }
        .story-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.1s; }
        .story-item:hover { transform: translateY(-3px); }
        
        .story-ring {
            width: 56px; height: 56px; border-radius: 50%; padding: 2px;
            background: #e2e8f0; display: flex; align-items: center; justify-content: center;
        }
        /* ê° ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ */
        .story-ring.pol { background: linear-gradient(135deg, #2c3e50, #4ca1af); } /* ì •ì¹˜ */
        .story-ring.eco { background: linear-gradient(135deg, #11998e, #38ef7d); } /* ê²½ì œ */
        .story-ring.it { background: linear-gradient(135deg, #56ccf2, #2f80ed); } /* IT */
        .story-ring.war { background: linear-gradient(135deg, #cb2d3e, #ef473a); } /* ì „ìŸ */
        .story-ring.cul { background: linear-gradient(135deg, #834d9b, #d04ed6); } /* ë¬¸í™” */
        .story-ring.coin { background: linear-gradient(135deg, #f7971e, #ffd200); } /* ì½”ì¸ */
        .story-ring.bank { background: linear-gradient(135deg, #1e3c72, #2a5298); } /* ì€í–‰ */
        .story-ring.media { background: linear-gradient(135deg, #ff0099, #493240); } /* ë¯¸ë””ì–´ */
        
        .story-img {
            width: 50px; height: 50px; background: #fff; border-radius: 50%; border: 2px solid #fff;
            display: flex; align-items: center; justify-content: center; font-size: 20px;
        }
        .story-name { font-size: 10px; margin-top: 4px; font-weight: 600; color: #4b5563; }

        /* ê²€ìƒ‰ì°½ */
        .search-area { width: 100%; padding: 5px 15px 10px 15px; }
        .search-input {
            width: 100%; padding: 8px 12px; border-radius: 10px; border: 1px solid #cbd5e0;
            background: #f8fafc; font-size: 0.9rem; outline: none; transition: 0.3s;
        }
        .search-input:focus { background: #fff; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(192, 57, 43, 0.1); }

        /* --- [Layout Grid] --- */
        .main-layout {
            max-width: 1400px; margin: var(--header-offset) auto 0; padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr 320px; 
            gap: 30px;
            min-height: 100vh;
        }

        /* --- [Feed] --- */
        .feed-section { width: 100%; }
        .feed-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 25px; 
        }
        
        .card {
            background: var(--card-bg); border: 1px solid #e2e8f0; border-radius: 12px;
            cursor: pointer; overflow: hidden; height: 100%; display: flex; flex-direction: column;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); }
        .card-header { padding: 12px 15px; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #f1f5f9; }
        .source-icon { width: 32px; height: 32px; border-radius: 8px; background: #333; object-fit: cover; }
        .source-name { font-weight: 700; font-size: 13px; color: #555; text-transform: uppercase; }
        .card-media { width: 100%; aspect-ratio: 16/9; background: #000; position: relative; }
        .card-media img { width: 100%; height: 100%; object-fit: cover; opacity: 0.95; }
        .category-tag {
            position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.7);
            color: #fff; padding: 3px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: bold;
        }
        .card-body { padding: 15px; flex: 1; display: flex; flex-direction: column; }
        .card-title { font-weight: 800; font-size: 1.1rem; margin-bottom: 8px; line-height: 1.4; color: #1a202c; }
        .card-desc { font-size: 0.9rem; color: #64748b; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.6; }
        .card-actions { margin-top: auto; padding-top: 15px; display: flex; gap: 15px; font-size: 20px; color: #94a3b8; }

        /* --- [Sidebar] --- */
        .sidebar-section { position: relative; }
        .history-box {
            position: sticky; top: 200px; 
            background: #fff; border: 1px solid #e2e8f0; border-radius: 16px;
            padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.03);
            max-height: calc(100vh - 220px); overflow-y: auto;
        }
        .history-title { font-weight: 800; font-size: 1rem; margin-bottom: 15px; color: #2c3e50; display: flex; justify-content: space-between; align-items: center; }
        .clear-btn { font-size: 0.75rem; color: #ef4444; cursor: pointer; }
        .history-item { display: flex; gap: 10px; margin-bottom: 15px; cursor: pointer; transition: 0.2s; }
        .history-item:hover { opacity: 0.7; }
        .h-thumb { width: 80px; height: 45px; border-radius: 6px; object-fit: cover; background: #eee; flex-shrink: 0; }
        .h-info { display: flex; flex-direction: column; justify-content: center; }
        .h-title { font-size: 0.8rem; font-weight: 700; line-height: 1.3; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .h-channel { font-size: 0.7rem; color: #888; margin-top: 2px; }

        /* --- [Player] --- */
        #fixedPlayer {
            position: fixed; top: var(--header-offset); left: 0; width: 100%; z-index: 1900;
            background: rgba(0,0,0,0.8); display: none; transition: top 0.3s;
        }
        #fixedPlayer.sticky-top { top: 30px !important; z-index: 2100; background: #000; } 
        .player-content-wrapper { max-width: 900px; margin: 0 auto; background: #000; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        #fixedPlayer.sticky-top .player-content-wrapper { max-width: 100%; }
        .video-container { position: relative; width: 100%; padding-bottom: 56.25%; background: #000; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        .player-controls { background: #111; color: #fff; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
        .close-player-btn { background: none; border: none; color: #fff; font-size: 1.3rem; cursor: pointer; }

        /* --- [AI Result] --- */
        .ai-result-box { width: 100%; background: #fff; border-radius: 16px; border: 1px solid #e2e8f0; display: none; overflow: hidden; margin-bottom: 30px; box-shadow: 0 10px 25px rgba(0,0,0, 0.05); }
        .ai-header-area { padding: 12px 15px; background: linear-gradient(to right, #f8fafc, #fff); display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #f1f5f9; }
        .ai-loader { width: 18px; height: 18px; border: 2px solid #eee; border-top: 2px solid var(--accent); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .ai-image-gen img { width: 100%; height: 280px; object-fit: cover; display: none; }
        .ai-body { padding: 20px; font-size: 1rem; line-height: 1.6; color: #334155; }

        /* í˜ì´ì§€ë„¤ì´ì…˜ */
        .pagination-container { display: flex; justify-content: center; gap: 8px; margin: 30px 0 80px 0; }
        .page-btn { width: 40px; height: 40px; border-radius: 10px; background: #fff; border: 1px solid #cbd5e0; display: flex; align-items: center; justify-content: center; font-weight: 700; cursor: pointer; font-size: 0.9rem; transition: 0.2s; }
        .page-btn:hover { background: #f1f5f9; }
        .page-btn.active { background: var(--accent); color: #fff; border-color: var(--accent); }

        /* [í•˜ë‹¨ íƒ­] */
        .bottom-nav { 
            position: fixed; bottom: 0; width: 100%; height: 55px; 
            background: rgba(255,255,255,0.98); border-top: 1px solid #e2e8f0; 
            backdrop-filter: blur(10px); 
            display: flex; justify-content: center; align-items: center; z-index: 1000; 
        }
        .nav-inner { max-width: 600px; width: 100%; display: flex; justify-content: space-around; }
        .nav-item { font-size: 20px; color: #94a3b8; cursor: pointer; transition: 0.2s; }
        .nav-item.active { color: var(--accent); transform: scale(1.1); }

        /* [ëª¨ë°”ì¼] */
        @media (max-width: 1000px) {
            .main-layout { grid-template-columns: 1fr; margin-top: var(--header-offset); padding: 0 10px; }
            .sidebar-section { display: none; } 
            .feed-grid { grid-template-columns: 1fr; }
            #fixedPlayer { top: var(--header-offset); }
            .player-content-wrapper { max-width: 100%; }
        }
    </style>
</head>
<body>

    <div class="ticker-wrap">
        <div class="ticker">
            <span class="ticker-item"><span class="badge-breaking">BREAKING</span> ìš°í¬ë¼ì´ë‚˜ í‰í™” í˜‘ìƒ ë‚œí•­ ì§€ì†</span>
            <span class="ticker-item"><span class="badge-breaking">ECONOMY</span> ë¯¸ ì—°ì¤€, ê¸°ì¤€ê¸ˆë¦¬ ë™ê²° ì‹œì‚¬</span>
            <span class="ticker-item">NASDAQ <span class="up">â–² 1.2%</span></span>
            <span class="ticker-item">BTC <span class="down">â–¼ 0.5%</span></span>
            <span class="ticker-item"><span class="badge-breaking">TECH</span> ì• í”Œ, ìƒˆë¡œìš´ AI ê¸°ëŠ¥ ë°œí‘œ</span>
            <span class="ticker-item">USD/KRW <span class="down">â–¼ 1,320.50</span></span>
            <span class="ticker-item"><span class="badge-breaking">CULTURE</span> BTS ì†”ë¡œ ì•¨ë²” ë¹Œë³´ë“œ 1ìœ„ ì§„ì…</span>
        </div>
    </div>

    <header id="mainHeader">
        <div class="header-inner">
            <div class="header-top">
                <div class="logo-area" onclick="location.href='https://minetia.github.io/Home/'">
                    <i class="fas fa-newspaper logo-icon"></i>
                    <span class="logo-text">News</span>
                    <span class="category-badge">Global</span>
                </div>
                
                <div class="header-actions">
                    <div class="notification-wrap" id="bellIcon" onclick="updateData()">
                        <i class="far fa-bell"></i>
                        <div class="red-dot" id="notiDot"></div>
                    </div>
                    <select class="lang-selector" id="langSelect" onchange="changeLanguage()">
                        <option value="ko">KR</option>
                        <option value="en">EN</option>
                        <option value="jp">JP</option>
                        <option value="zh">CN</option>
                    </select>
                </div>
            </div>
            
            <div class="stories-container">
                <div class="story-scroll-view">
                    <div class="story-wrapper">
                        <div class="story-item" onclick="filterCategory('Politics')">
                            <div class="story-ring pol"><div class="story-img">ğŸ›ï¸</div></div>
                            <div class="story-name">ì •ì¹˜</div>
                        </div>
                        <div class="story-item" onclick="filterCategory('Economy')">
                            <div class="story-ring eco"><div class="story-img">ğŸ“‰</div></div>
                            <div class="story-name">ê²½ì œ</div>
                        </div>
                        <div class="story-item" onclick="filterCategory('IT')">
                            <div class="story-ring it"><div class="story-img">ğŸ’»</div></div>
                            <div class="story-name">IT/Tech</div>
                        </div>
                        <div class="story-item" onclick="filterCategory('War')">
                            <div class="story-ring war"><div class="story-img">ğŸŒ</div></div>
                            <div class="story-name">êµ­ì œ/ì „ìŸ</div>
                        </div>
                        <div class="story-item" onclick="filterCategory('Culture')">
                            <div class="story-ring cul"><div class="story-img">ğŸ¨</div></div>
                            <div class="story-name">ë¬¸í™”/ì˜ˆìˆ </div>
                        </div>
                        <div class="story-item" onclick="location.href='https://minetia.github.io/coin/'">
                            <div class="story-ring coin"><div class="story-img">ğŸª™</div></div>
                            <div class="story-name">ì½”ì¸</div>
                        </div>
                        <div class="story-item" onclick="filterCategory('Bank')">
                            <div class="story-ring bank"><div class="story-img">ğŸ¦</div></div>
                            <div class="story-name">ê¸ˆìœµ/ì€í–‰</div>
                        </div>
                        <div class="story-item" onclick="location.href='https://minetia.github.io/video/'">
                            <div class="story-ring media"><div class="story-img">ğŸ¬</div></div>
                            <div class="story-name">ì˜ìƒ</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="search-area">
                <input type="text" class="search-input" id="searchInput" placeholder="ë‰´ìŠ¤, ì •ì¹˜, ê²½ì œ, í‚¤ì›Œë“œ ê²€ìƒ‰..." onkeyup="handleSearch(event)">
            </div>
        </div>
    </header>

    <div id="fixedPlayer">
        <div class="player-content-wrapper">
            <div class="video-container" id="playerFrameArea"></div>
            <div class="player-controls">
                <span style="font-size:12px; font-weight:700; color:#fff;" id="nowPlayingText">LIVE NEWS</span>
                <button class="close-player-btn" onclick="closePlayer()"><i class="fas fa-times"></i></button>
            </div>
        </div>
    </div>

    <div class="main-layout">
        
        <main class="feed-section">
            <div id="aiResult" class="ai-result-box">
                <div class="ai-header-area">
                    <div class="ai-loader" id="aiLoader"></div>
                    <span style="font-weight:700; color:#c0392b; font-size:0.9rem;" id="aiTitle">AI News Analyst...</span>
                </div>
                <div class="ai-image-gen" id="aiImageArea">
                    <img id="aiGeneratedImg" src="" alt="AI Gen">
                </div>
                <div class="ai-body" id="aiContent"></div>
            </div>

            <div class="feed-grid" id="feedContainer"></div>
            <div class="pagination-container" id="paginationContainer"></div>
        </main>

        <aside class="sidebar-section">
            <div class="history-box">
                <div class="history-title">
                    <span>ğŸ•’ Recent News</span>
                    <span class="clear-btn" onclick="clearHistory()">Clear</span>
                </div>
                <div id="historyList">
                    <div class="empty-history">ìµœê·¼ ë³¸ ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
                </div>
            </div>
        </aside>

    </div>

    <div class="bottom-nav">
        <div class="nav-inner">
            <div class="nav-item" onclick="location.href='https://minetia.github.io/Home/'"><i class="fas fa-home"></i></div>
            <div class="nav-item active"><i class="far fa-newspaper"></i></div>
            <div class="nav-item"><i class="fas fa-globe"></i></div>
            <div class="nav-item" onclick="location.href='https://minetia.github.io/video/'"><i class="fas fa-play"></i></div>
        </div>
    </div>

    <script>
        const YOUTUBE_API_KEY = 'AIzaSyBlKZbCP6qZiv3NLBmgh4iled9Y4BmCUM8'; 
        const API_URL = 'https://www.googleapis.com/youtube/v3/search';
        
        const TOTAL_ITEMS = 60; // ë°ì´í„°ëŸ‰ ì¦ê°€
        const ITEMS_PER_PAGE = 12; 
        let allData = [];
        let currentPage = 1;
        let currentLang = 'ko'; 

        // --- 1. ê²€ìƒ‰ ë° AI ë¶„ì„ ---
        async function handleSearch(e) {
            if (e.key === 'Enter') {
                const query = document.getElementById('searchInput').value;
                if (!query) return;
                
                closePlayer();
                document.getElementById('aiResult').style.display = 'block';
                
                resetAI(query);
                generateAI(query);
                await searchYouTubeReal(query);
            }
        }

        function resetAI(query) {
            const box = document.getElementById('aiResult');
            box.style.display = 'block';
            document.getElementById('aiLoader').style.display = 'block';
            document.getElementById('aiImageArea').querySelector('img').style.display = 'none';
            document.getElementById('aiTitle').innerText = `Analyzing News Data: '${query}'...`;
            document.getElementById('aiContent').innerText = '';
            document.getElementById('paginationContainer').innerHTML = '';
        }

        function generateAI(query) {
            const imgTag = document.getElementById('aiGeneratedImg');
            // ë‰´ìŠ¤ ê´€ë ¨ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸
            imgTag.src = `https://image.pollinations.ai/prompt/${encodeURIComponent(query + " news report journalism 4k realistic")}`;
            imgTag.onload = () => { imgTag.style.display = 'block'; };

            setTimeout(() => {
                document.getElementById('aiLoader').style.display = 'none';
                document.getElementById('aiTitle').innerText = `AI Insight: ${query}`;
                
                let text = "";
                if (currentLang === 'ko') text = `<strong>ğŸ“° AI ë‰´ìŠ¤ ë¶„ì„</strong><br>"${query}" í‚¤ì›Œë“œëŠ” í˜„ì¬ ì£¼ìš” ë¯¸ë””ì–´ì—ì„œ ëœ¨ê±°ìš´ ê´€ì‹¬ì„ ë°›ê³  ìˆìŠµë‹ˆë‹¤. ì •ì¹˜, ê²½ì œì  íŒŒì¥ì´ ì˜ˆìƒë˜ë©° ê´€ë ¨ ë³´ë„ê°€ ê¸‰ì¦í•˜ê³  ìˆìŠµë‹ˆë‹¤.`;
                else if (currentLang === 'en') text = `<strong>ğŸ“° AI News Analysis</strong><br>"${query}" is currently trending across major media outlets. Significant political and economic impacts are expected.`;
                else if (currentLang === 'jp') text = `<strong>ğŸ“° AI ãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æ</strong><br>"${query}" ã¯ç¾åœ¨ã€ä¸»è¦ãƒ¡ãƒ‡ã‚£ã‚¢ã§æ³¨ç›®ã‚’é›†ã‚ã¦ã„ã¾ã™ã€‚æ”¿æ²»çš„ãƒ»çµŒæ¸ˆçš„ãªå½±éŸ¿ãŒäºˆæƒ³ã•ã‚Œã¾ã™ã€‚`;
                else if (currentLang === 'zh') text = `<strong>ğŸ“° AI æ–°é—»åˆ†æ</strong><br>"${query}" ç›®å‰åœ¨å„å¤§åª’ä½“å¼•èµ·å¼ºçƒˆå…³æ³¨ã€‚é¢„è®¡å°†äº§ç”Ÿé‡å¤§çš„æ”¿æ²»å’Œç»æµå½±å“ã€‚`;
                
                document.getElementById('aiContent').innerHTML = text;
            }, 1500);
        }

        async function searchYouTubeReal(query) {
            try {
                const url = `${API_URL}?part=snippet&maxResults=12&q=${encodeURIComponent(query + " news")}&type=video&key=${YOUTUBE_API_KEY}`;
                const response = await fetch(url);
                const data = await response.json();
                if (data.error) throw new Error(data.error.message);
                renderFeed(data.items, true); 
            } catch (error) {
                console.warn("API Error:", error);
                renderMockData(query);
            }
        }

        // --- 2. ê°€ìƒ ë‰´ìŠ¤ ë°ì´í„° ìƒì„± (ì •ì¹˜, ê²½ì œ, IT, ì „ìŸ, ë¬¸í™” ë“±) ---
        function generateVirtualData() {
            // ë‹¤ì–‘í•œ ì¹´í…Œê³ ë¦¬ ë°ì´í„°
            const categories = ['Politics', 'Economy', 'IT', 'War', 'Culture', 'Bank', 'Media'];
            
            const topics = {
                ko: [
                    '[ì •ì¹˜] ëŒ€í†µë ¹ êµ­ë¹ˆ ë°©ë¬¸ ë° ì •ìƒíšŒë‹´ ì¼ì • ë°œí‘œ',
                    '[ê²½ì œ] ê¸°ì¤€ê¸ˆë¦¬ ë™ê²°, ë¶€ë™ì‚° ì‹œì¥ì— ë¯¸ì¹  ì˜í–¥ì€?',
                    '[ì „ìŸ] ìš°í¬ë¼ì´ë‚˜ ì „ì„  ê¸´ì¥ ê³ ì¡°, êµ­ì œì‚¬íšŒ ìš°ë ¤',
                    '[IT] ì‚¼ì„± vs ì• í”Œ, ì°¨ì„¸ëŒ€ ìŠ¤ë§ˆíŠ¸í° ê²½ìŸ ì‹¬í™”',
                    '[ë¬¸í™”] K-POP ê·¸ë£¹, ë¹Œë³´ë“œ ì°¨íŠ¸ ë˜ë‹¤ì‹œ ì„ê¶Œ',
                    '[ì€í–‰] ì£¼ìš” ì‹œì¤‘ì€í–‰, ëŒ€ì¶œ ê¸ˆë¦¬ ì¸í•˜ ê²½ìŸ',
                    '[ë¯¸ë””ì–´] ë„·í”Œë¦­ìŠ¤ ì‹ ì‘ ë“œë¼ë§ˆ ì „ ì„¸ê³„ 1ìœ„ ë‹¬ì„±',
                    '[ì½”ì¸] ë¹„íŠ¸ì½”ì¸ ë°˜ê°ê¸° ì´í›„ ì‹œì¥ ì „ë§ ë¶„ì„',
                    '[ì‚¬íšŒ] ì¥ë§ˆì²  ëŒ€ë¹„ ì•ˆì „ ëŒ€ì±… ë§ˆë ¨ ì‹œê¸‰'
                ],
                en: [
                    '[Politics] President Announces State Visit Schedule',
                    '[Economy] Fed Rates Unchanged: Impact on Housing Market',
                    '[War] Tension Rises in Ukraine, Global Concerns Grow',
                    '[IT] Samsung vs Apple: Next-Gen Smartphone Battle',
                    '[Culture] K-POP Group Tops Billboard Charts Again',
                    '[Bank] Major Banks Compete to Lower Loan Rates',
                    '[Media] New Netflix Series Hits #1 Worldwide',
                    '[Crypto] Bitcoin Market Outlook Post-Halving',
                    '[Society] Safety Measures Urged for Rainy Season'
                ],
                jp: [
                    '[æ”¿æ²»] å¤§çµ±é ˜ã®å›½è³“è¨ªå•ãŠã‚ˆã³é¦–è„³ä¼šè«‡ã®æ—¥ç¨‹ç™ºè¡¨',
                    '[çµŒæ¸ˆ] åŸºæº–é‡‘åˆ©å‡çµã€ä¸å‹•ç”£å¸‚å ´ã¸ã®å½±éŸ¿ã¯ï¼Ÿ',
                    '[æˆ¦äº‰] ã‚¦ã‚¯ãƒ©ã‚¤ãƒŠæˆ¦ç·šã®ç·Šå¼µé«˜ã¾ã‚‹ã€å›½éš›ç¤¾ä¼šãŒæ‡¸å¿µ',
                    '[IT] ã‚µãƒ ã‚¹ãƒ³å¯¾ã‚¢ãƒƒãƒ—ãƒ«ã€æ¬¡ä¸–ä»£ã‚¹ãƒãƒ›ç«¶äº‰æ¿€åŒ–',
                    '[æ–‡åŒ–] K-POPã‚°ãƒ«ãƒ¼ãƒ—ã€ãƒ“ãƒ«ãƒœãƒ¼ãƒ‰ãƒãƒ£ãƒ¼ãƒˆå†ã³å¸­å·»',
                    '[éŠ€è¡Œ] ä¸»è¦éŠ€è¡Œã€è²¸å‡ºé‡‘åˆ©å¼•ãä¸‹ã’ç«¶äº‰',
                    '[ãƒ¡ãƒ‡ã‚£ã‚¢] Netflixæ–°ä½œãƒ‰ãƒ©ãƒã€ä¸–ç•Œ1ä½ã‚’é”æˆ',
                    '[ã‚³ã‚¤ãƒ³] ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³åŠæ¸›æœŸå¾Œã®å¸‚å ´å±•æœ›åˆ†æ',
                    '[ç¤¾ä¼š] æ¢…é›¨ã«å‚™ãˆãŸå®‰å…¨å¯¾ç­–ãŒæ€¥å‹™'
                ],
                zh: [
                    '[æ”¿æ²»] æ€»ç»Ÿå®£å¸ƒå›½äº‹è®¿é—®åŠé¦–è„‘ä¼šè°ˆæ—¥ç¨‹',
                    '[ç»æµ] åŸºå‡†åˆ©ç‡å†»ç»“ï¼Œå¯¹æˆ¿åœ°äº§å¸‚åœºæœ‰ä½•å½±å“ï¼Ÿ',
                    '[æˆ˜äº‰] ä¹Œå…‹å…°å‰çº¿ç´§å¼ å±€åŠ¿åŠ å‰§ï¼Œå›½é™…ç¤¾ä¼šæ‹…å¿§',
                    '[IT] ä¸‰æ˜Ÿä¸è‹¹æœï¼Œä¸‹ä¸€ä»£æ™ºèƒ½æ‰‹æœºç«äº‰åŠ å‰§',
                    '[æ–‡åŒ–] K-POPç»„åˆå†æ¬¡å¸­å·å…¬å‘Šç‰Œæ’è¡Œæ¦œ',
                    '[é“¶è¡Œ] ä¸»è¦å•†ä¸šé“¶è¡Œç«ç›¸é™ä½è´·æ¬¾åˆ©ç‡',
                    '[åª’ä½“] Netflixæ–°å‰§è£ç™»å…¨çƒç¬¬ä¸€',
                    '[å¸åœˆ] æ¯”ç‰¹å¸å‡åŠåçš„å¸‚åœºå‰æ™¯åˆ†æ',
                    '[ç¤¾ä¼š] äºŸéœ€åˆ¶å®šæ¢…é›¨å­£èŠ‚å®‰å…¨å¯¹ç­–'
                ]
            };
            const channels = ['YTN News', 'BBC World', 'CNN', 'Reuters', 'Bloomberg', 'JTBC News', 'KBS World', 'Al Jazeera', 'TechCrunch'];
            
            const generated = [];
            for (let i = 1; i <= TOTAL_ITEMS; i++) {
                const langKey = currentLang;
                const topic = topics[langKey][Math.floor(Math.random() * topics[langKey].length)];
                const channel = channels[Math.floor(Math.random() * channels.length)];
                // ëœë¤ ì¹´í…Œê³ ë¦¬ íƒœê·¸
                const cat = categories[Math.floor(Math.random() * categories.length)];
                
                generated.push({
                    videoId: 'HK6y8DAPN_0', // ì˜ˆì‹œ ID
                    category: cat,
                    snippet: {
                        title: topic,
                        description: `Global News Network covering ${cat}, Business, and Tech. Real-time updates.`,
                        thumbnails: { medium: { url: `https://picsum.photos/600/400?random=${i + 500}` } },
                        channelTitle: channel,
                        publishedAt: new Date().toISOString()
                    }
                });
            }
            return generated;
        }

        function filterCategory(cat) {
            document.getElementById('searchInput').value = cat;
            handleSearch({key: 'Enter'});
        }

        function initData() {
            allData = generateVirtualData();
            renderPage(1);
            showNotification();
            loadHistory();
        }

        function changeLanguage() {
            currentLang = document.getElementById('langSelect').value;
            const searchInput = document.getElementById('searchInput');
            
            if (currentLang === 'ko') searchInput.placeholder = "ë‰´ìŠ¤, ì •ì¹˜, ê²½ì œ ê²€ìƒ‰...";
            else if (currentLang === 'jp') searchInput.placeholder = "ãƒ‹ãƒ¥ãƒ¼ã‚¹, æ”¿æ²», çµŒæ¸ˆ æ¤œç´¢...";
            else if (currentLang === 'zh') searchInput.placeholder = "æœç´¢ æ–°é—», æ”¿æ²», ç»æµ...";
            else searchInput.placeholder = "Search News, Politics, Economy...";

            updateData();
        }

        function updateData() {
            document.getElementById('bellIcon').classList.remove('alert');
            document.getElementById('notiDot').style.display = 'none';
            document.getElementById('feedContainer').innerHTML = `<div style="text-align:center; padding:100px; grid-column:1/-1;"><i class="fas fa-circle-notch fa-spin fa-2x"></i><br>Updating News Feed...</div>`;
            setTimeout(() => {
                allData = generateVirtualData();
                renderPage(1);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 600);
        }

        function showNotification() {
            document.getElementById('bellIcon').classList.add('alert');
            document.getElementById('notiDot').style.display = 'block';
        }

        // --- 3. ë Œë”ë§ ---
        function renderPage(page) {
            currentPage = page;
            const start = (page - 1) * ITEMS_PER_PAGE;
            const end = start + ITEMS_PER_PAGE;
            const itemsToShow = allData.slice(start, end);
            renderFeed(itemsToShow, false);
            renderPaginationBtns();
        }

        function renderPaginationBtns() {
            const container = document.getElementById('paginationContainer');
            container.innerHTML = '';
            const totalPages = Math.ceil(allData.length / ITEMS_PER_PAGE);
            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement('div');
                btn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
                btn.innerText = i;
                btn.onclick = () => { renderPage(i); window.scrollTo({ top: 0, behavior: 'smooth' }); };
                container.appendChild(btn);
            }
        }

        function renderFeed(items, isRealApi = false) {
            const container = document.getElementById('feedContainer');
            container.innerHTML = ''; 
            items.forEach(item => {
                const videoId = isRealApi ? item.id.videoId : item.videoId;
                const snippet = isRealApi ? item.snippet : item.snippet;
                const thumb = snippet.thumbnails.medium.url;
                const title = snippet.title;
                const channel = snippet.channelTitle;
                // ê°€ìƒ ë°ì´í„°ì¼ ë•Œ ì¹´í…Œê³ ë¦¬ íƒœê·¸ í‘œì‹œ
                const catTag = item.category ? `<span class="category-tag">${item.category}</span>` : '';

                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => playVideo(videoId, title, channel, thumb);
                card.innerHTML = `
                    <div class="card-header">
                        <img src="https://ui-avatars.com/api/?name=${channel.substring(0,2)}&background=333&color=fff" class="source-icon">
                        <div class="source-name">${channel}</div>
                    </div>
                    <div class="card-media">
                        <img src="${thumb}" alt="Thumbnail">
                        ${catTag}
                        <i class="fas fa-play-circle" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:50px; color:rgba(255,255,255,0.9);"></i>
                    </div>
                    <div class="card-body">
                        <div class="card-title">${title}</div>
                        <div class="card-desc">${snippet.description}</div>
                        <div class="card-actions">
                            <i class="far fa-newspaper"></i> Read<div style="margin-left:auto;"><i class="far fa-bookmark"></i></div>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderMockData(query) {
            allData = generateVirtualData();
            renderPage(1);
        }

        // --- 4. í”Œë ˆì´ì–´ & íˆìŠ¤í† ë¦¬ ---
        function playVideo(videoId, title, channel, thumb) {
            const player = document.getElementById('fixedPlayer');
            const frame = document.getElementById('playerFrameArea');
            const offsetHeight = 185; 

            player.style.display = 'block';
            player.classList.remove('sticky-top');
            player.style.top = (offsetHeight + 20) + 'px';

            // ìœ íŠœë¸Œ ì„ë² ë“œ í‘œì¤€ ì£¼ì†Œ ì‚¬ìš©
            frame.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&playsinline=1" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
            
            window.scrollTo({ top: 0, behavior: 'smooth' });

            if(title && channel) {
                saveToHistory({ videoId, title, channel, thumb });
            }
        }

        function closePlayer() {
            const player = document.getElementById('fixedPlayer');
            document.getElementById('playerFrameArea').innerHTML = '';
            player.style.display = 'none';
            player.classList.remove('sticky-top');
        }

        function saveToHistory(item) {
            let history = JSON.parse(localStorage.getItem('newsHistory')) || [];
            history = history.filter(h => h.videoId !== item.videoId);
            history.unshift(item);
            if(history.length > 20) history.pop();
            localStorage.setItem('newsHistory', JSON.stringify(history));
            renderHistory();
        }

        function loadHistory() {
            renderHistory();
        }

        function renderHistory() {
            const history = JSON.parse(localStorage.getItem('newsHistory')) || [];
            const container = document.getElementById('historyList');
            container.innerHTML = '';

            if (history.length === 0) {
                container.innerHTML = '<div class="empty-history">ìµœê·¼ ë³¸ ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            history.forEach(h => {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.onclick = () => playVideo(h.videoId);
                div.innerHTML = `
                    <img src="${h.thumb}" class="h-thumb">
                    <div class="h-info">
                        <div class="h-title">${h.title}</div>
                        <div class="h-channel">${h.channel}</div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function clearHistory() {
            localStorage.removeItem('newsHistory');
            renderHistory();
        }

        window.addEventListener('scroll', () => {
            const player = document.getElementById('fixedPlayer');
            if(player.style.display !== 'block') return;
            if (window.scrollY > 100) player.classList.add('sticky-top');
            else if (window.scrollY < 10) player.classList.remove('sticky-top');
        });

        const TWELVE_HOURS = 12 * 60 * 60 * 1000;
        setInterval(() => { initData(); }, TWELVE_HOURS);

        initData();
    </script>
</body>
</html>
